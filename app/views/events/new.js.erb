$('#create_event').html('<%= escape_javascript(render(:partial => 'new_form')) %>');

$('#event_start_time_date').datepicker(
   {
       dateFormat: 'yy-mm-dd',
   });

$("#event_start_time_time").timePicker	({
	  startTime: "09:00",
	  show24Hours: false,
	  step: 15});

$("#event_end_time_time").timePicker({
	  	  startTime: "10:00",
		  show24Hours: false,
		  step: 15});

$('#event_end_time_date').datepicker(
	   {
	       dateFormat: 'yy-mm-dd',
	   });


// Store time used by duration.
var oldTime = $.timePicker("#event_start_time_time").getTime();

// Keep the duration between the two inputs.
$("#event_start_time_time").change(function() {
  if ($("#event_end_time_time").val()) { // Only update when second input has a value.
    // Calculate duration.
    var duration = ($.timePicker("#event_end_time_time").getTime() - oldTime);
    var time = $.timePicker("#event_start_time_time").getTime();
    // Calculate and update the time in the second input.
    $.timePicker("#event_end_time_time").setTime(new Date(new Date(time.getTime() + duration)));
    oldTime = time;
  }
});

$( ".button" ).button();

$('#create_event_dialog').dialog({
	title: 'New Event',
	modal: true,
	width: 700,
	close: function(event, ui) { $('#create_event_dialog').dialog('destroy') }
});


